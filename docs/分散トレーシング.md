# 分散トレーシング

## 概要

クエストに対して動作するマイクロサービスの処理状況をログとして送信・保存することで、リクエスト全体の流れを可視化するシステムのことを指します。
今回はスタンダードなOpenTelmetryを利用した分散トレーシングを実装。

ミドルウェアとGORMのコールバックを通してログを取得している。
ここでの注意点として、web socket等のリアルタイム通信で頻繁にリクエストがされる場合、ミドルウェアを通るとCloudWatchやCloud Logging等のモニタリングサービスに対して大量のリクエストが飛んでしまい負荷がかかる可能性があるので取り扱いには注意。

Spanなどの作り込みが用途に合わせて重要になってくるその際はドキュメントの以下のページを参考にするとよい

- [https://opentelemetry.io/docs/concepts/semantic-conventions/](https://opentelemetry.io/docs/concepts/semantic-conventions/)

例
- [HTTP](https://opentelemetry.io/docs/specs/semconv/http/http-spans/)
- [データベース](https://opentelemetry.io/docs/specs/semconv/attributes-registry/db/)

